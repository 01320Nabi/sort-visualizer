<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Sort Visualizer</title>
    </head>
    <body>
        <div>
            <button onclick="setIntervals(100);randomSort(visualizer)">Randomize</button>
            <button onclick="setIntervals(100);reverse(visualizer)">Reverse</button>
            <button onclick="setIntervals(100);visualizer.bubbleSort()">Bubble Sort</button>
            <button onclick="setIntervals(100);visualizer.selectionSort()">Selection Sort</button>
            <button onclick="setIntervals(100);visualizer.insertionSort()">Insertion Sort</button>
            <button onclick="setIntervals(10);visualizer.shellSort()">Shell Sort</button>
            <button onclick="setIntervals(10);visualizer.mergeSort()">Merge Sort</button>
            <button onclick="setIntervals(10);visualizer.quickSort()">Quick Sort</button>
            <button onclick="setIntervals(10);visualizer.heapSort()">Heap Sort</button>
            <button onclick="setIntervals(10);visualizer.radixSort(4)">Radix Sort</button>
        </div>
        <canvas id='sort-visualize'></canvas>
    </body>
    <script src="sort_visualize.js"></script>
    <script src="algorithms.js"></script>
    <script>
        let array = [];
        for(let i=0; i<512; i++) {
            array.push(i+1);
        }
        
        let visualizer = new SortVisualizer(document.getElementById('sort-visualize'), 1800, 900, array, 1, clearIntervals);
        visualizer.draw();

        function randomSort(v) {
            let randomIndex = function() {
                return Math.floor(Math.random()*v.length);
            };
            for(let i=0; i<v.length; i++) {
                v.swap(i, randomIndex());
            }
        }
        function reverse(v) {
            for(let i=0; i<Math.floor(v.length/2); i++) {
                v.swap(i, v.length-i-1);
            }
        }

        let intervals = [];

        function setIntervals(c) {
            for(let i=0; i<c; i++) {
                intervals.push(setInterval(v => v.shiftAction(), 10, visualizer));
            }
        }

        function clearIntervals() {
            while(intervals.length>0) {
                clearInterval(intervals.pop());
            }
        }

        (function draw() {
            visualizer.draw();
            requestAnimationFrame(draw);
        })();
    </script>
</html>